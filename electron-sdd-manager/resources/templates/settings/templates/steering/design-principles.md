# Design Principles

AIによる設計・実装判断の原則を定義する。
CLAUDE.mdの一般原則（DRY, SSOT, KISS, YAGNI）を補完し、判断基準を明確化する。

## AI設計判断の基本原則

**AIは「人間が実装する場合のコスト」を判断基準にしてはならない。**

AIは無限の実装能力を持つ前提で、技術的に最善の解決策を提案すべきである。
「変更が大きい」「影響範囲が広い」は、設計判断の制約にならない。

## 判断基準（優先順）

1. **技術的正しさ**: その解決策は根本原因に対処しているか
2. **保守性**: 将来の変更を困難にしないか、技術的負債を生まないか
3. **一貫性**: 既存のアーキテクチャ・パターンと整合するか
4. **テスト容易性**: 変更が適切にテスト可能か

## 禁止事項

以下の理由で設計・実装の判断を歪めてはならない：

- 「変更が大きい」を理由に場当たり的な解決を選ぶ
- 「影響範囲が広い」を理由に根本解決を避ける
- 「コストが高い」を理由に設計の妥協を提案する
- 「時間がかかる」を理由に暫定対応を推奨する

## 場当たり的な解決の害

場当たり的な修正は、たとえ小さくても：

- 技術的負債として蓄積する
- 後続の開発者（AIを含む）を混乱させる
- 同種の問題が再発する原因となる
- コードベースの一貫性を損なう

**小さな妥協の積み重ねが、大きな技術的負債を生む。**

## 正しいアプローチ

| 状況 | 場当たり的（避ける） | 根本的（推奨） |
|------|---------------------|---------------|
| 同じパターンの重複 | コピペで追加 | 共通化・抽象化 |
| 既存設計との不整合 | 例外処理で回避 | 設計の見直し |
| テスト困難なコード | テストをスキップ | テスト可能な設計に変更 |
| 型の不整合 | any/as で回避 | 型定義の修正 |

## 設計レビュー時の確認

設計を提案する際は、以下を自問すること：

1. この解決策は根本原因に対処しているか？
2. 「コストが高い」を理由に妥協していないか？
3. 6ヶ月後にこのコードを見て、なぜこうなったか理解できるか？
4. 同じ問題が別の場所で発生したとき、同じ対応をするか？
