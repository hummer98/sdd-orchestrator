description = "Reply to document review issues and classify responses"

prompt = '''
# Document Review Reply

Analyze the document review report and generate a structured reply for each issue.

**Output Language**: Follow the language configuration in GEMINI.md or the project's default language.

## Target Feature

{{args}}

## Parse Arguments

The arguments are in the format: `<feature-name> <review-number>`

Example: `my-feature 1` means feature `my-feature` and review number `1`

## Documents to Read

Read the specified document review file:
- `.kiro/specs/<feature-name>/document-review-<review-number>.md`

Also read spec documents for context:
@{.kiro/specs/<feature-name>/requirements.md}
@{.kiro/specs/<feature-name>/design.md}
@{.kiro/specs/<feature-name>/tasks.md}

## Instructions

For each issue in the document review report, provide a response with classification:

### Response Classifications

1. **Fix Required** - Issue needs to be fixed
   - Clearly actionable issues that should be addressed
   - Mark with `[Fix Required]`

2. **Accepted** - Acknowledged, will be addressed
   - Valid concerns that are acknowledged
   - Mark with `[Accepted]`

3. **Deferred** - Out of scope for now
   - Valid but low priority or out of current scope
   - Mark with `[Deferred]`

4. **Needs Discussion** - Requires human decision
   - Ambiguous issues requiring human input
   - Mark with `[Needs Discussion]`

## Generate Reply

Reply file: `.kiro/specs/<feature-name>/document-review-<review-number>-reply.md`

### Reply Structure

```markdown
# Document Review Reply #{n}

**Feature**: {feature-name}
**Reply Date**: {YYYY-MM-DD}
**Review Analyzed**: document-review-{n}.md

## Summary

- Fix Required: {count}
- Accepted: {count}
- Deferred: {count}
- Needs Discussion: {count}

## Responses

### Issue 1: {issue title}

**Classification**: [Fix Required/Accepted/Deferred/Needs Discussion]

**Response**:
{Detailed response explaining the decision and any planned actions}

---

### Issue 2: {issue title}

**Classification**: [Fix Required/Accepted/Deferred/Needs Discussion]

**Response**:
{Detailed response}

---

{Continue for all issues...}

## Next Steps

{List of concrete next steps based on the responses}

---
_This reply was generated by the document-review-reply command._
```

## Output

After reply completion, display:
1. **Reply Location**: `.kiro/specs/<feature-name>/document-review-<review-number>-reply.md`
2. **Reply Summary**: Fix Required/Accepted/Deferred/Needs Discussion counts
3. **Next Action**:
   - If Fix Required > 0: Apply fixes, then run `/kiro:document-review <feature-name>` again
   - If Needs Discussion > 0: Discuss issues with team before proceeding
   - Otherwise: Proceed with implementation
'''
