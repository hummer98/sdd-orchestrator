# Requirements: Project Selection View

## Decision Log

<!-- 計画対話の構造化記録 -->

### 配置場所
- **議論**: フルスクリーン表示、左サイドバー、メイン領域（中央）の3択を検討
- **結論**: メイン領域（中央）に配置
- **理由**: 現在の「プロジェクトを選択してください」プレースホルダーをリッチUIに置換するのが自然。画面の主要部分で操作しやすい

### 最近開いたフォルダのレイアウト
- **議論**: グリッド（2x3）、縦並びリスト、横並びカードの3択を検討
- **結論**: 縦並びリスト形式（6個）
- **理由**: 既存のRecentProjectsコンポーネントと一貫したデザイン。パス情報の表示も見やすい

### パス入力時のエラー処理
- **議論**: リアルタイム検証（入力中にチェック）、ボタン無効化方式（クリック後のみエラー）の2択を検討
- **結論**: ボタン無効化方式
- **理由**: UX向上：入力中は煩わしくない、クリック後にのみエラー表示

### 既存RecentProjectsコンポーネントの扱い
- **議論**: 既存のRecentProjects.tsxは現在App.tsxで未使用（死んだコード）。そのまま使用、props拡張、新規作成、廃止の選択肢を検討
- **結論**: 新規コンポーネントを作成し、既存RecentProjects.tsxは廃止
- **理由**:
  1. RecentProjectsは複雑な機能（バージョンチェック、アップデートボタン）を持ち、Welcome画面には過剰
  2. 既にApp.tsxで未使用のため、削除しても影響なし
  3. 似た機能のコンポーネントが2つあると混乱する
  4. 責務分離：Welcome画面用はシンプルに、サイドバー用は将来必要になれば再設計

## Introduction

プロジェクト未選択時に表示されるプロジェクト選択インターフェース。従来の「プロジェクトを選択してください」というテキストのみの表示を、OS標準フォルダ選択ダイアログ、パス直接入力、最近開いたプロジェクトへのクイックアクセスを提供するリッチUIに置き換える。

## Requirements

### Requirement 1: フォルダ選択ダイアログ

**Objective:** ユーザーとして、OS標準のフォルダ選択ダイアログからプロジェクトを開きたい。これにより、慣れ親しんだUIで直感的にフォルダを選択できる。

#### Acceptance Criteria
1. 「フォルダを選択」ボタンをクリックすると、OS標準のフォルダ選択ダイアログが表示される
2. フォルダを選択すると、そのフォルダがプロジェクトとして開かれる
3. ダイアログをキャンセルした場合、何も起こらずプロジェクト選択画面に戻る
4. 選択したフォルダが有効なパスであれば、プロジェクトとして読み込まれる

### Requirement 2: パス直接入力

**Objective:** ユーザーとして、テキストフィールドにフォルダパスを入力してプロジェクトを開きたい。これにより、パスをコピー&ペーストして素早くプロジェクトを開ける。

#### Acceptance Criteria
1. テキストフィールドが表示され、フォルダパスを入力できる
2. 「開く」ボタンをクリックすると、入力されたパスのフォルダがプロジェクトとして開かれる
3. 入力されたパスが存在しない場合、「開く」ボタンクリック後にエラーメッセージが表示される
4. Enterキーで「開く」ボタンと同等の動作をする
5. テキストフィールドが空の場合、「開く」ボタンは無効化される

### Requirement 3: 最近開いたプロジェクトのクイックアクセス

**Objective:** ユーザーとして、最近開いたプロジェクトをワンクリックで開きたい。これにより、頻繁に使うプロジェクトへのアクセスが高速化される。

#### Acceptance Criteria
1. 最近開いたプロジェクトが縦並びリスト形式で最大6件表示される
2. 各項目にはフォルダ名（最後のパスセグメント）とフルパスが表示される
3. 項目をクリックすると、そのプロジェクトが開かれる
4. 最近開いたプロジェクトが存在しない場合、「最近開いたプロジェクト」セクションは非表示または「なし」と表示される
5. 表示順は最近開いた順（新しい順）とする
6. 存在しないパスの場合、クリック後にエラーメッセージを表示する

### Requirement 4: UIレイアウト

**Objective:** ユーザーとして、プロジェクト選択画面が整理され見やすいレイアウトで表示されてほしい。これにより、目的の操作を素早く見つけられる。

#### Acceptance Criteria
1. プロジェクト未選択時のみ、メイン領域（中央）にプロジェクト選択UIが表示される
2. UIは以下の順序で縦に配置される:
   - タイトル/説明テキスト
   - 「フォルダを選択」ボタン（プライマリアクション）
   - パス入力フィールド + 「開く」ボタン
   - 最近開いたプロジェクトリスト
3. プロジェクト選択後は、通常のアプリケーション画面が表示される
4. ダークモードに対応したスタイリングとする

### Requirement 5: 既存機能との整合性

**Objective:** 開発者として、既存のプロジェクト管理機能と整合性を保ちたい。これにより、コードの重複を避け保守性を維持できる。

#### Acceptance Criteria
1. 既存のconfigStoreのrecentProjects機能を活用する
2. 既存のprojectStore.selectProject()を使用してプロジェクト選択を行う
3. 既存のIPC（electronAPI.showOpenDialog等）を使用してフォルダ選択ダイアログを呼び出す

### Requirement 6: 既存RecentProjectsコンポーネントの廃止

**Objective:** 開発者として、未使用のコードを削除して技術的負債を減らしたい。これにより、コードベースがシンプルになり保守性が向上する。

#### Acceptance Criteria
1. RecentProjects.tsx を削除する
2. RecentProjects.test.tsx を削除する
3. components/index.ts からRecentProjectsのexportを削除する
4. 削除後もビルドとテストが正常に完了する

## Out of Scope

- ドラッグ&ドロップによるフォルダ選択
- プロジェクトのお気に入り/ピン留め機能
- プロジェクトの検索/フィルタリング機能
- 複数プロジェクトの同時選択
- プロジェクトのプレビュー表示
- Remote UI対応（Desktop UI専用機能のため）

## Open Questions

- 「フォルダを選択」ボタンのアイコン選定（FolderOpen等）は設計フェーズで決定
- エラーメッセージの具体的な文言は設計フェーズで決定
