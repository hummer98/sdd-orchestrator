# Response to Document Review #2

**Feature**: remote-ui-vanilla-removal
**Review Date**: 2026-01-17
**Reply Date**: 2026-01-17

---

## Response Summary

| Severity | Issues | Fix Required | No Fix Needed | Needs Discussion |
| -------- | ------ | ------------ | ------------- | ---------------- |
| Critical | 1      | 0            | 1             | 0                |
| Warning  | 1      | 0            | 1             | 0                |
| Info     | 2      | 0            | 2             | 0                |

---

## Response to Critical Issues

### C-001: E2Eテスト用data-testidの大幅不足

**Issue**: E2Eテスト（`remote-webserver.e2e.spec.ts`）で使用される17種のdata-testidのうち、14種が現在のReact版コンポーネントに存在しないか命名が異なる。

**Judgment**: **No Fix Needed** ❌

**Evidence**:
レビューの指摘内容は**正確**であり、data-testidの不足は事実です。しかし、これは**仕様文書の問題ではなく、実装時の作業項目**として既にDesign文書とTasks文書に明記されています。

1. **Design文書（design.md:243-263）** にE2Eテスト互換性のための完全なdata-testid一覧表が存在:
   ```markdown
   | E2E testid | 現在のReact版 | 対応コンポーネント | 対応方法 |
   |------------|---------------|-------------------|----------|
   | remote-status-dot | なし | App.tsx/Header | 新規追加 |
   ...
   ```

2. **Tasks文書（tasks.md:26-57）** にTask 3.1〜3.5として具体的な実装タスクが定義済み:
   - Task 3.1: App.tsx/Headerにステータス表示用data-testid追加
   - Task 3.2: SpecsView/SpecDetailViewにdata-testid追加
   - Task 3.3: MobileLayoutにタブ用data-testid追加
   - Task 3.4: BugsView/BugDetailViewにdata-testid追加
   - Task 3.5: AgentView/ReconnectOverlayにdata-testid追加

3. **Tasks文書の「併存」方針** も明記済み（既存testidを維持しつつremote-プレフィックス付きを追加）

レビューが指摘する「data-testidの大幅不足」は既知であり、Design/Tasksでカバー済みのため、仕様変更は不要です。

**Action Items**: なし（認識事項として記録済み、実装時に対応）

---

## Response to Warnings

### W-001: MobileLayout.tsxのタブdata-testid

**Issue**: E2Eテストは`remote-tab-specs`と`remote-tab-bugs`を使用してタブ切り替えを行っているが、現在のMobileLayout.tsxにはdata-testidが設定されていない。

**Judgment**: **No Fix Needed** ❌

**Evidence**:
この指摘も正確ですが、**Task 3.3で既に対応予定**です:

```markdown
- [ ] 3.3 (P) MobileLayoutにタブ用のdata-testidを追加する
  - `remote-tab-specs`: Specsタブ
  - `remote-tab-bugs`: Bugsタブ
  - _Requirements: 4.1, 4.2_
```

現在のMobileLayout.tsx（`src/remote-ui/layouts/MobileLayout.tsx:149-166`）のタブボタンには確かにdata-testidが欠落していますが、これは設計上想定済みであり、実装フェーズで追加されます。

**Action Items**: なし（Task 3.3で対応済み）

---

## Response to Info (Low Priority)

| #    | Issue     | Judgment      | Reason         |
| ---- | --------- | ------------- | -------------- |
| S-001 | Specアイテムの動的data-testid命名ルール | No Fix Needed | Design文書に`remote-spec-item-{name}`の形式が明記済み。`{name}`はspec.feature_nameをそのまま使用（slugify不要）。E2Eテストの`[data-testid^="remote-spec-item-"]`セレクタで動的部分を吸収可能 |
| S-002 | Skip済みBugsテストの扱い | No Fix Needed | Task 3.4はskipテストも想定した設計。`remote-bug-*`系のdata-testidを追加することで将来のテスト有効化に備える |

---

## Files to Modify

| File   | Changes   |
| ------ | --------- |
| なし | 全ての指摘はDesign/Tasks文書でカバー済みのため、仕様文書の修正は不要 |

---

## Conclusion

レビュー#2で指摘された全ての問題は、既存のDesign文書とTasks文書で対応済みです:

- **C-001（data-testid不足）**: Design文書のdata-testid一覧表が正確な実装ガイドを提供
- **W-001（MobileLayoutタブ）**: Task 3.3で対応予定
- **S-001/S-002**: 軽微な確認事項であり、現在の設計で対応可能

レビューの分析自体は正確であり、実装フェーズでの認識事項として価値があります。ただし、**仕様変更は不要**であり、実装を開始できる状態です。

**次のステップ**: `/kiro:spec-impl remote-ui-vanilla-removal` で実装開始

---

_This reply was generated by the document-review-reply command._
